{"is_source_file": true, "format": "Python", "description": "This file contains SQLAlchemy ORM models and database setup code for managing users and notes in a database-backed application. It establishes database connection, defines User and Note models, and includes a function to initialize the database schema.", "external_files": [".env"], "external_methods": ["load_dotenv"], "published": ["DB_URI", "engine", "SessionLocal", "Base", "User", "Note", "init_db"], "classes": [{"name": "User", "description": "ORM model representing a user with email and password, and related notes."}, {"name": "Note", "description": "ORM model representing a note with title, content, timestamps, and a foreign key to user."}], "methods": [{"name": "init_db()", "description": "Initializes the database tables based on the ORM models.", "scope": "", "scopeKind": ""}], "calls": ["create_engine", "sessionmaker", "declarative_base", "load_dotenv", "os.getenv", "Base.metadata.create_all"], "search-terms": ["SQLAlchemy ORM", "models", "User", "Note", "database setup", "init_db", "DATABASE_URL"], "state": 2, "file_id": 11, "knowledge_revision": 23, "git_revision": "", "ctags": [{"_type": "tag", "name": "Base", "path": "/home/kavia/workspace/code-generation/note-keeper-82001ea6/notes_backend/src/api/db.py", "pattern": "/^Base: DeclarativeMeta = declarative_base()$/", "language": "Python", "typeref": "typename:DeclarativeMeta", "kind": "variable"}, {"_type": "tag", "name": "DB_URI", "path": "/home/kavia/workspace/code-generation/note-keeper-82001ea6/notes_backend/src/api/db.py", "pattern": "/^DB_URI = os.getenv(\"DATABASE_URL\")$/", "language": "Python", "kind": "variable"}, {"_type": "tag", "name": "Note", "path": "/home/kavia/workspace/code-generation/note-keeper-82001ea6/notes_backend/src/api/db.py", "pattern": "/^class Note(Base):$/", "language": "Python", "kind": "class"}, {"_type": "tag", "name": "SessionLocal", "path": "/home/kavia/workspace/code-generation/note-keeper-82001ea6/notes_backend/src/api/db.py", "pattern": "/^SessionLocal = sessionmaker(autocommit=False, autoflush=False, bind=engine)$/", "language": "Python", "kind": "variable"}, {"_type": "tag", "name": "User", "path": "/home/kavia/workspace/code-generation/note-keeper-82001ea6/notes_backend/src/api/db.py", "pattern": "/^class User(Base):$/", "language": "Python", "kind": "class"}, {"_type": "tag", "name": "__tablename__", "path": "/home/kavia/workspace/code-generation/note-keeper-82001ea6/notes_backend/src/api/db.py", "pattern": "/^    __tablename__ = \"notes\"$/", "file": true, "language": "Python", "kind": "variable", "scope": "Note", "scopeKind": "class"}, {"_type": "tag", "name": "__tablename__", "path": "/home/kavia/workspace/code-generation/note-keeper-82001ea6/notes_backend/src/api/db.py", "pattern": "/^    __tablename__ = \"users\"$/", "file": true, "language": "Python", "kind": "variable", "scope": "User", "scopeKind": "class"}, {"_type": "tag", "name": "content", "path": "/home/kavia/workspace/code-generation/note-keeper-82001ea6/notes_backend/src/api/db.py", "pattern": "/^    content = Column(Text, nullable=False)$/", "language": "Python", "kind": "variable", "scope": "Note", "scopeKind": "class"}, {"_type": "tag", "name": "created_at", "path": "/home/kavia/workspace/code-generation/note-keeper-82001ea6/notes_backend/src/api/db.py", "pattern": "/^    created_at = Column(DateTime(timezone=True), server_default=func.now())$/", "language": "Python", "kind": "variable", "scope": "Note", "scopeKind": "class"}, {"_type": "tag", "name": "email", "path": "/home/kavia/workspace/code-generation/note-keeper-82001ea6/notes_backend/src/api/db.py", "pattern": "/^    email = Column(String, unique=True, nullable=False, index=True)$/", "language": "Python", "kind": "variable", "scope": "User", "scopeKind": "class"}, {"_type": "tag", "name": "engine", "path": "/home/kavia/workspace/code-generation/note-keeper-82001ea6/notes_backend/src/api/db.py", "pattern": "/^engine = create_engine(DB_URI, connect_args={\"check_same_thread\": False} if \"sqlite\" in DB_URI e/", "language": "Python", "kind": "variable"}, {"_type": "tag", "name": "hashed_password", "path": "/home/kavia/workspace/code-generation/note-keeper-82001ea6/notes_backend/src/api/db.py", "pattern": "/^    hashed_password = Column(String, nullable=False)$/", "language": "Python", "kind": "variable", "scope": "User", "scopeKind": "class"}, {"_type": "tag", "name": "id", "path": "/home/kavia/workspace/code-generation/note-keeper-82001ea6/notes_backend/src/api/db.py", "pattern": "/^    id = Column(Integer, primary_key=True, index=True)$/", "language": "Python", "kind": "variable", "scope": "Note", "scopeKind": "class"}, {"_type": "tag", "name": "id", "path": "/home/kavia/workspace/code-generation/note-keeper-82001ea6/notes_backend/src/api/db.py", "pattern": "/^    id = Column(Integer, primary_key=True, index=True)$/", "language": "Python", "kind": "variable", "scope": "User", "scopeKind": "class"}, {"_type": "tag", "name": "init_db", "path": "/home/kavia/workspace/code-generation/note-keeper-82001ea6/notes_backend/src/api/db.py", "pattern": "/^def init_db():$/", "language": "Python", "kind": "function", "signature": "()"}, {"_type": "tag", "name": "notes", "path": "/home/kavia/workspace/code-generation/note-keeper-82001ea6/notes_backend/src/api/db.py", "pattern": "/^    notes = relationship(\"Note\", back_populates=\"owner\", cascade=\"all, delete-orphan\")$/", "language": "Python", "kind": "variable", "scope": "User", "scopeKind": "class"}, {"_type": "tag", "name": "owner", "path": "/home/kavia/workspace/code-generation/note-keeper-82001ea6/notes_backend/src/api/db.py", "pattern": "/^    owner = relationship(\"User\", back_populates=\"notes\")$/", "language": "Python", "kind": "variable", "scope": "Note", "scopeKind": "class"}, {"_type": "tag", "name": "title", "path": "/home/kavia/workspace/code-generation/note-keeper-82001ea6/notes_backend/src/api/db.py", "pattern": "/^    title = Column(String, nullable=False)$/", "language": "Python", "kind": "variable", "scope": "Note", "scopeKind": "class"}, {"_type": "tag", "name": "updated_at", "path": "/home/kavia/workspace/code-generation/note-keeper-82001ea6/notes_backend/src/api/db.py", "pattern": "/^    updated_at = Column(DateTime(timezone=True), server_default=func.now(), onupdate=func.now())$/", "language": "Python", "kind": "variable", "scope": "Note", "scopeKind": "class"}, {"_type": "tag", "name": "user_id", "path": "/home/kavia/workspace/code-generation/note-keeper-82001ea6/notes_backend/src/api/db.py", "pattern": "/^    user_id = Column(Integer, ForeignKey(\"users.id\"), nullable=False)$/", "language": "Python", "kind": "variable", "scope": "Note", "scopeKind": "class"}], "hash": "23cfdbaba885f1e6db8afbdbd66b9391", "format-version": 4, "code-base-name": "notes_backend", "filename": "notes_backend/src/api/db.py", "fields": [{"name": "DeclarativeMeta Base", "scope": "", "scopeKind": "", "description": "unavailable"}, {"name": "DB_URI = os.getenv(\"DATABASE_URL\")", "scope": "", "scopeKind": "", "description": "unavailable"}, {"name": "SessionLocal = sessionmaker(autocommit=False, autoflush=False, bind=engine)", "scope": "", "scopeKind": "", "description": "unavailable"}, {"name": "__tablename__ = \"notes\"", "scope": "Note", "scopeKind": "class", "description": "unavailable"}, {"name": "__tablename__ = \"users\"", "scope": "User", "scopeKind": "class", "description": "unavailable"}, {"name": "content = Column(Text, nullable=False)", "scope": "Note", "scopeKind": "class", "description": "unavailable"}, {"name": "created_at = Column(DateTime(timezone=True), server_default=func.now())", "scope": "Note", "scopeKind": "class", "description": "unavailable"}, {"name": "email = Column(String, unique=True, nullable=False, index=True)", "scope": "User", "scopeKind": "class", "description": "unavailable"}, {"name": "engine = create_engine(DB_URI, connect_args={\"check_same_thread\": False} if \"sqlite\" in DB_URI e/", "scope": "", "scopeKind": "", "description": "unavailable"}, {"name": "hashed_password = Column(String, nullable=False)", "scope": "User", "scopeKind": "class", "description": "unavailable"}, {"name": "id = Column(Integer, primary_key=True, index=True)", "scope": "Note", "scopeKind": "class", "description": "unavailable"}, {"name": "notes = relationship(\"Note\", back_populates=\"owner\", cascade=\"all, delete-orphan\")", "scope": "User", "scopeKind": "class", "description": "unavailable"}, {"name": "owner = relationship(\"User\", back_populates=\"notes\")", "scope": "Note", "scopeKind": "class", "description": "unavailable"}, {"name": "title = Column(String, nullable=False)", "scope": "Note", "scopeKind": "class", "description": "unavailable"}, {"name": "updated_at = Column(DateTime(timezone=True), server_default=func.now(), onupdate=func.now())", "scope": "Note", "scopeKind": "class", "description": "unavailable"}, {"name": "user_id = Column(Integer, ForeignKey(\"users.id\"), nullable=False)", "scope": "Note", "scopeKind": "class", "description": "unavailable"}], "revision_history": [{"23": ""}]}